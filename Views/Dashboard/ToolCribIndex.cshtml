@model PlusCP.Models.DashboardModel
@{
    ViewBag.Title = "Tool Crib Dashboard Index";
    Layout = null;
}

<link rel="stylesheet" type="text/css" href="~/Content/css/jquery.gridster.css" />
<script type="text/javascript" src="~/Scripts/jquery.gridster.js"></script>
<link href="~/Content/css/message.css" rel="stylesheet" />
<style type="text/css">

    /* Card base styling */
    .stat-card {
        display: flex;
        align-items: center;
        padding: 12px;
        background: #fff;
        border-radius: 12px;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
        transition: transform 0.2s;
        justify-content: flex-start;
    }

    /* Smaller width */
    .small-card {
        min-width: 200px;
        max-width: 230px;
        margin: auto;
    }

    /* Gap between cards */
    .row > div {
        padding-left: 10px;
        padding-right: 10px;
    }

    /* Hover effect */
    .stat-card:hover {
        transform: translateY(-5px);
    }

    .stat-icon {
        font-size: 28px;
        color: #fff;
        padding: 15px;
        border-radius: 12px;
        margin-right: 15px;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    /* Specific colors */
    .icon-blue {
        background-color: #007bff; /* Blue */
    }

    .icon-green {
        background-color: #28a745; /* Green */
    }

    .icon-darkyellow {
        background-color: #e69500; /* Dark yellow/orange */
    }


    /* Text style */
    .stat-info h5 {
        margin: 0;
        font-size: 13px;
        color: #666;
    }

    .stat-info h2 {
        margin: 0;
        font-size: 20px;
        font-weight: bold;
    }

    /* Row ke andar spacing */
    .row {
        margin-left: 0;
        margin-right: 0;
    }

        /* Cards ke beech aur row ke andar gap */
        .row > div {
            padding: 10px; /* ye har card ke around space dega */
        }
</style>
<div class="panel panel-default" style="border-radius:12px; box-shadow:0 3px 10px rgba(0,0,0,0.1); border: none;">
    <div class="panel-body text-center" style="padding:25px; background: linear-gradient(135deg, #d4edda, #c3e6cb); border-radius:12px;">
        <h3 style="margin:0; color:#003B59; font-weight:bold;">
            Welcome, @Session["Username"]! <br />
            <span style="font-size:16px; color:#555;">(ID: @Session["SigninId"])</span>
        </h3>
        <h4 style="margin-top:10px; color:#003B59; font-weight:bold;">
            Tool Crib <span style="color: #2AAA82; font-size: 25px; font-weight: bold">|</span>
            <span style="color: #2AAA82; font-size: 20px; font-weight: bold">Portal</span>
        </h4>
    </div>
</div>

<div class="container mt-4">
    <!-- White Card Container -->
    <div class="card shadow-lg p-4" style="border-radius:15px; background:#fff;">

        <!-- Stats Row -->
        <div class="row g-4 mb-4 text-center">
            <!-- Total Tools -->
            <div class="col-md-4">
                <div class="d-flex align-items-center justify-content-center p-3 border rounded" style="background:#f9f9f9;">
                    <i class="fas fa-toolbox fa-2x text-primary me-3"></i>
                    <div>
                        <h6 style="font-size:16px; color:#555;">Total Tools</h6>
                        <h3 class="fw-bold" style="font-size:26px;">10</h3>
                    </div>
                </div>
            </div>

            <!-- Available -->
            <div class="col-md-4">
                <div class="d-flex align-items-center justify-content-center p-3 border rounded" style="background:#f9f9f9;">
                    <i class="fas fa-check-circle fa-2x text-success me-3"></i>
                    <div>
                        <h6 style="font-size:16px; color:#555;">Available</h6>
                        <h3 class="fw-bold" style="font-size:26px;">31</h3>
                    </div>
                </div>
            </div>

            <!-- Checked Out -->
            <div class="col-md-4">
                <div class="d-flex align-items-center justify-content-center p-3 border rounded" style="background:#f9f9f9;">
                    <i class="fas fa-briefcase fa-2x text-warning me-3"></i>
                    <div>
                        <h6 style="font-size:16px; color:#555;">Checked Out</h6>
                        <h3 class="fw-bold" style="font-size:26px;">4</h3>
                    </div>
                </div>
            </div>
        </div>

        <!-- Charts Row -->
        <div class="row g-4">
            <div class="col-md-4">
                <div class="p-3 border rounded h-100" style="background:#f9f9f9;">
                    <h6 class="text-center mb-3 text-primary" style="font-size:16px;">Tools Distribution</h6>
                    <canvas id="donutChart"></canvas>
                </div>
            </div>

            <div class="col-md-4">
                <div class="p-3 border rounded h-100" style="background:#f9f9f9;">
                    <h6 class="text-center mb-3 text-primary" style="font-size:16px;">Checked Out Tools (Monthly)</h6>
                    <canvas id="barChart"></canvas>
                </div>
            </div>

            <div class="col-md-4">
                <div class="p-3 border rounded h-100" style="background:#f9f9f9;">
                    <h6 class="text-center mb-3 text-primary" style="font-size:16px;">Usage Trend</h6>
                    <canvas id="lineChart"></canvas>
                </div>
            </div>
        </div>
    </div>
</div>




<script>
    $(document).ready(function () {
        $.ajax({
            url: '/Tool/GetWidgetCounts',
            type: 'GET',
            success: function (data) {
                $("#totalTools").text(data.TotalTools);
                $("#availableTools").text(data.Available);
                $("#checkedOutTools").text(data.CheckedOut);
            },
            error: function () {
                alert("Error loading stats!");
            }
        });
    });




    // Donut Chart
    new Chart(document.getElementById('donutChart'), {
        type: 'doughnut',
        data: {
            labels: ['Available', 'Checked Out', 'Maintenance'],
            datasets: [{
                data: [120, 45, 15],
                backgroundColor: ['#28a745', '#007bff', '#e69500'], // green, blue, dark yellow
                borderWidth: 1
            }]
        },
        options: {
            plugins: { legend: { position: 'bottom' } }
        }
    });

    // Bar Chart
    new Chart(document.getElementById('barChart'), {
        type: 'bar',
        data: {
            labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
            datasets: [{
                label: 'Checked Out',
                data: [10, 20, 15, 30, 25, 40],
                backgroundColor: '#007bff' // blue
            }]
        },
        options: {
            responsive: true,
            scales: { y: { beginAtZero: true } }
        }
    });

    // Line Chart
    new Chart(document.getElementById('lineChart'), {
        type: 'line',
        data: {
            labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4'],
            datasets: [{
                label: 'Usage Trend',
                data: [5, 15, 10, 20],
                borderColor: '#28a745', // green
                backgroundColor: '#28a745',
                fill: false,
                tension: 0.3
            }]
        },
        options: {
            responsive: true,
            scales: { y: { beginAtZero: true } }
        }
    });
</script>




